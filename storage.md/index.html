<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css integrity=sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.7.1/css/all.css integrity=sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr crossorigin=anonymous><link rel=stylesheet href=https://improbable-eng.github.io/thanos/main.css><link rel=stylesheet href=https://improbable-eng.github.io/thanos/syntax.css><link rel=icon href=https://improbable-eng.github.io/thanos/icon-light.png><title>Thanos - Highly available Prometheus setup with long term storage capabilities</title><meta property=og:image content=/icon-light.png><meta property=og:type content=object><meta property=og:title content=Thanos><meta property=og:description content="Thanos - Highly available Prometheus setup with long term storage capabilities"></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-purple"><a href=https://improbable-eng.github.io/thanos/ class=navbar-brand><img src=https://improbable-eng.github.io/thanos/icon-dark.png alt="Thanos logo"> Thanos</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=https://improbable-eng.github.io/thanos/getting-started.md>Documentation</a></li><li class=nav-item><a class=nav-link href=https://github.com/improbable-eng/thanos/releases>Download</a></li><li class=nav-item><a href=https://github.com/improbable-eng/thanos class=nav-link><i class="fab fa-fw fa-github"></i>GitHub</a></li><li class=nav-item><a href=https://twitter.com/ThanosMetrics class=nav-link><i class="fab fa-fw fa-twitter"></i>Twitter</a></li></ul></div></nav><div class=container><div class="row py-3 py-lg-5"><div class="col-12 col-lg-3"><button class="btn btn-block btn-outline-secondary mb-3 d-block d-lg-none" type=button data-toggle=collapse data-target=.docs-menu>
Toggle Menu</button><nav class="docs-menu collapse d-lg-block"><h5>Thanos</h5><div class="list-group list-group-flush"><a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/getting-started.md/>Getting Started</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/changelog/>Changelog</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/design.md/>Design</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/storage.md/>Object Storage</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/service-discovery.md/>Service Discovery</a></div><h5 class=mt-3>Components</h5><div class="list-group list-group-flush"><a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/components/bucket.md/>Bucket</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/components/compact.md/>Compact</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/components/query.md/>Query</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/components/rule.md/>Rule</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/components/sidecar.md/>Sidecar</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/components/store.md/>Store</a></div><h5 class=mt-3>Contributing</h5><div class="list-group list-group-flush"><a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/code_of_conduct/>Code of Conduct</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/contributing/how-to-contribute-to-docs.md/>Contribute to docs</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/contributing/>Contributing</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/contributing/dev.md/>Troubleshooting for dev workflow</a></div><h5 class=mt-3>Proposals</h5><div class="list-group list-group-flush"><a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/proposals/201809_gossip-removal.md/>Deprecated gossip clustering in favor of File SD</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/proposals/201807_store_instance_high_availability.md/>High-availability for store instances</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/proposals/201901-read-write-operations-bucket.md/>Read-Write coordination free operational contract for object storage</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/proposals/config.md/>Thanos Cluster Configuration</a>
<a class="list-group-item list-group-item-action list-group-item-thanos py-1" href=https://improbable-eng.github.io/thanos/proposals/201812_thanos-remote-receive.md/>Thanos Remote Write</a></div></nav></div><div class="col-12 col-lg-9"><h1 id=object-storage>Object Storage</h1><p>Thanos supports any object stores that can be implemented against Thanos <a href=https://github.com/improbable-eng/thanos/pkg/objstore/objstore.go>objstore.Bucket interface</a></p><p>All clients are configured using <code>--objstore.config-file</code> to reference to the configuration file or <code>--objstore.config</code> to put yaml config directly.</p><h2 id=implementations>Implementations</h2><p>Current object storage client implementations:</p><table class="table table-striped"><thead><tr><th>Provider</th><th>Maturity</th><th>Auto-tested on CI</th><th>Maintainers</th></tr></thead><tbody><tr><td>Google Cloud Storage</td><td>Stable (production usage)</td><td>yes</td><td>@bwplotka</td></tr><tr><td>AWS S3</td><td>Stable (production usage)</td><td>yes</td><td>@bwplotka</td></tr><tr><td>Azure Storage Account</td><td>Stable (production usage)</td><td>yes</td><td>@vglafirov</td></tr><tr><td>OpenStack Swift</td><td>Beta (working PoCs, testing usage)</td><td>no</td><td>@sudhi-vm</td></tr><tr><td>Tencent COS</td><td>Beta (testing usage)</td><td>no</td><td>@jojohappy</td></tr></tbody></table><p>NOTE: Currently Thanos requires strong consistency (write-read) for object store implementation.</p><h2 id=how-to-add-a-new-client>How to add a new client?</h2><ol><li>Create new directory under <code>pkg/objstore/&lt;provider&gt;</code></li><li>Implement <a href=https://github.com/improbable-eng/thanos/pkg/objstore/objstore.go>objstore.Bucket interface</a></li><li>Add <code>NewTestBucket</code> constructor for testing purposes, that creates and deletes temporary bucket.</li><li>Use created <code>NewTestBucket</code> in <a href=https://github.com/improbable-eng/thanos/pkg/objstore/objtesting/foreach.go>ForeachStore method</a> to ensure we can run tests against new provider. (In PR)</li><li>RUN the <a href=https://github.com/improbable-eng/thanos/pkg/objstore/objtesting/acceptance_e2e_test.go>TestObjStoreAcceptanceTest</a> against your provider to ensure it fits. Fix any found error until test passes. (In PR)</li><li>Add client implementation to the factory in <a href=https://github.com/improbable-eng/thanos/pkg/objstore/client/factory.go>factory</a> code. (Using as small amount of flags as possible in every command)</li><li>Add client struct config to <a href=https://github.com/improbable-eng/thanos/scripts/bucketcfggen/main.go>bucketcfggen</a> to allow config auto generation.</li></ol><p>At that point, anyone can use your provider by spec</p><h2 id=aws-s3-configuration>AWS S3 configuration</h2><p>Thanos uses minio client to upload Prometheus data into AWS S3.</p><p>To configure S3 bucket as an object store you need to set these mandatory S3 variables in yaml format stored in a file:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml>type<span class=p>:</span><span class=w> </span>S3<span class=w>
</span><span class=w></span>config<span class=p>:</span><span class=w>
</span><span class=w>  </span>bucket<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span><span class=w>  </span>endpoint<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span><span class=w>  </span>access_key<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span><span class=w>  </span>insecure<span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span><span class=w>  </span>signature_version2<span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span><span class=w>  </span>encrypt_sse<span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span><span class=w>  </span>secret_key<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span><span class=w>  </span>put_user_metadata<span class=p>:</span><span class=w> </span>{}<span class=w>
</span><span class=w>  </span>http_config<span class=p>:</span><span class=w>
</span><span class=w>    </span>idle_conn_timeout<span class=p>:</span><span class=w> </span>0s<span class=w>
</span><span class=w>    </span>insecure_skip_verify<span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span><span class=w>  </span>trace<span class=p>:</span><span class=w>
</span><span class=w>    </span>enable<span class=p>:</span><span class=w> </span><span class=kc>false</span></code></pre></div><p>AWS region to endpoint mapping can be found in this <a href=https://docs.aws.amazon.com/general/latest/gr/rande.html#s3_region>link</a></p><p>Make sure you use a correct signature version.
Currently AWS require signature v4, so it needs <code>signature-version2: false</code>, otherwise, you will get Access Denied error, but several other S3 compatible use <code>signature-version2: true</code></p><p>For debug and testing purposes you can set</p><ul><li><code>insecure: true</code> to switch to plain insecure HTTP instead of HTTPS</li><li><code>http_config.insecure_skip_verify: true</code> to disable TLS certificate verification (if your S3 based storage is using a self-signed certificate, for example)</li><li><code>trace.enable: true</code> to enable the minio client&rsquo;s verbose logging. Each request and response will be logged into the debug logger, so debug level logging must be enabled for this functionality.</li></ul><h3 id=credentials>Credentials</h3><p>By default Thanos will try to retrieve credentials from the following sources:</p><ol><li>From config file if BOTH <code>access_key</code> and <code>secret_key</code> are present.</li><li>From the standard AWS environment variable - <code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code></li><li>From <code>~/.aws/credentials</code></li><li>IAM credentials retrieved from an instance profile.</li></ol><p>NOTE: Getting access key from config file and secret key from other method (and vice versa) is not supported.</p><h3 id=aws-policies>AWS Policies</h3><p>Example working AWS IAM policy for user:</p><ul><li>For deployment (policy for Thanos services):</li></ul><div class=highlight><pre class=chroma><code class=language-json data-lang=json><span class=p>{</span>
    <span class=nt>&#34;Version&#34;</span><span class=p>:</span> <span class=s2>&#34;2012-10-17&#34;</span><span class=p>,</span>
    <span class=nt>&#34;Statement&#34;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
            <span class=nt>&#34;Sid&#34;</span><span class=p>:</span> <span class=s2>&#34;Statement&#34;</span><span class=p>,</span>
            <span class=nt>&#34;Effect&#34;</span><span class=p>:</span> <span class=s2>&#34;Allow&#34;</span><span class=p>,</span>
            <span class=nt>&#34;Action&#34;</span><span class=p>:</span> <span class=p>[</span>
                <span class=s2>&#34;s3:ListBucket&#34;</span><span class=p>,</span>
                <span class=s2>&#34;s3:GetObject&#34;</span><span class=p>,</span>
                <span class=s2>&#34;s3:DeleteObject&#34;</span><span class=p>,</span>
                <span class=s2>&#34;s3:PutObject&#34;</span>
            <span class=p>],</span>
            <span class=nt>&#34;Resource&#34;</span><span class=p>:</span> <span class=p>[</span>
                <span class=s2>&#34;arn:aws:s3:::&lt;bucket&gt;/*&#34;</span><span class=p>,</span>
                <span class=s2>&#34;arn:aws:s3:::&lt;bucket&gt;&#34;</span>
            <span class=p>]</span>
        <span class=p>}</span>
    <span class=p>]</span>
<span class=p>}</span></code></pre></div><p>(No bucket policy)</p><p>To test the policy, set env vars for S3 access for <em>empty, not used</em> bucket as well as:
THANOS_SKIP_GCS_TESTS=true
THANOS_ALLOW_EXISTING_BUCKET_USE=true</p><p>And run: <code>GOCACHE=off go test -v -run TestObjStore_AcceptanceTest_e2e ./pkg/...</code></p><ul><li>For testing (policy to run e2e tests):</li></ul><p>We need access to CreateBucket and DeleteBucket and access to all buckets:</p><div class=highlight><pre class=chroma><code class=language-json data-lang=json><span class=p>{</span>
    <span class=nt>&#34;Version&#34;</span><span class=p>:</span> <span class=s2>&#34;2012-10-17&#34;</span><span class=p>,</span>
    <span class=nt>&#34;Statement&#34;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
            <span class=nt>&#34;Sid&#34;</span><span class=p>:</span> <span class=s2>&#34;Statement&#34;</span><span class=p>,</span>
            <span class=nt>&#34;Effect&#34;</span><span class=p>:</span> <span class=s2>&#34;Allow&#34;</span><span class=p>,</span>
            <span class=nt>&#34;Action&#34;</span><span class=p>:</span> <span class=p>[</span>
                <span class=s2>&#34;s3:ListBucket&#34;</span><span class=p>,</span>
                <span class=s2>&#34;s3:GetObject&#34;</span><span class=p>,</span>
                <span class=s2>&#34;s3:DeleteObject&#34;</span><span class=p>,</span>
                <span class=s2>&#34;s3:PutObject&#34;</span><span class=p>,</span>
                <span class=s2>&#34;s3:CreateBucket&#34;</span><span class=p>,</span>
                <span class=s2>&#34;s3:DeleteBucket&#34;</span>
            <span class=p>],</span>
            <span class=nt>&#34;Resource&#34;</span><span class=p>:</span> <span class=p>[</span>
                <span class=s2>&#34;arn:aws:s3:::&lt;bucket&gt;/*&#34;</span><span class=p>,</span>
                <span class=s2>&#34;arn:aws:s3:::&lt;bucket&gt;&#34;</span>
            <span class=p>]</span>
        <span class=p>}</span>
    <span class=p>]</span>
<span class=p>}</span></code></pre></div><p>With this policy you should be able to run set <code>THANOS_SKIP_GCS_TESTS=true</code> and unset <code>S3_BUCKET</code> and run all tests using <code>make test</code>.</p><p>Details about AWS policies: <a href=https://docs.aws.amazon.com/AmazonS3/latest/dev/using-with-s3-actions.html>https://docs.aws.amazon.com/AmazonS3/latest/dev/using-with-s3-actions.html</a></p><h2 id=gcs-configuration>GCS Configuration</h2><p>To configure Google Cloud Storage bucket as an object store you need to set <code>bucket</code> with GCS bucket name and configure Google Application credentials.</p><p>For example:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml>type<span class=p>:</span><span class=w> </span>GCS<span class=w>
</span><span class=w></span>config<span class=p>:</span><span class=w>
</span><span class=w>  </span>bucket<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span><span class=w>  </span>service_account<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span></code></pre></div><h3 id=using-google-application-credentials>Using GOOGLE_APPLICATION_CREDENTIALS</h3><p>Application credentials are configured via JSON file and only the bucket needs to be specified,
the client looks for:</p><ol><li>A JSON file whose path is specified by the
<code>GOOGLE_APPLICATION_CREDENTIALS</code> environment variable.</li><li>A JSON file in a location known to the gcloud command-line tool.
On Windows, this is <code>%APPDATA%/gcloud/application_default_credentials.json</code>.
On other systems, <code>$HOME/.config/gcloud/application_default_credentials.json</code>.</li><li>On Google App Engine it uses the <code>appengine.AccessToken</code> function.</li><li>On Google Compute Engine and Google App Engine Managed VMs, it fetches
credentials from the metadata server.
(In this final case any provided scopes are ignored.)</li></ol><p>You can read more on how to get application credential json file in <a href=https://cloud.google.com/docs/authentication/production>https://cloud.google.com/docs/authentication/production</a></p><h3 id=using-inline-a-service-account>Using inline a Service Account</h3><p>Another possibility is to inline the ServiceAccount into the Thanos configuration and only maintain one file.
This feature was added, so that the Prometheus Operator only needs to take care of one secret file.</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml>type<span class=p>:</span><span class=w> </span>GCS<span class=w>
</span><span class=w></span>config<span class=p>:</span><span class=w>
</span><span class=w>  </span>bucket<span class=p>:</span><span class=w> </span><span class=s2>&#34;thanos&#34;</span><span class=w>
</span><span class=w>  </span>service_account<span class=p>:</span><span class=w> </span>|<span class=sd>-
</span><span class=sd>    {</span><span class=w>
</span><span class=w>      </span><span class=s2>&#34;type&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;service_account&#34;</span><span class=p>,</span><span class=w>
</span><span class=w>      </span><span class=s2>&#34;project_id&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;project&#34;</span><span class=p>,</span><span class=w>
</span><span class=w>      </span><span class=s2>&#34;private_key_id&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;abcdefghijklmnopqrstuvwxyz12345678906666&#34;</span><span class=p>,</span><span class=w>
</span><span class=w>      </span><span class=s2>&#34;private_key&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;-----BEGIN PRIVATE KEY-----\...\n-----END PRIVATE KEY-----\n&#34;</span><span class=p>,</span><span class=w>
</span><span class=w>      </span><span class=s2>&#34;client_email&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;project@thanos.iam.gserviceaccount.com&#34;</span><span class=p>,</span><span class=w>
</span><span class=w>      </span><span class=s2>&#34;client_id&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;123456789012345678901&#34;</span><span class=p>,</span><span class=w>
</span><span class=w>      </span><span class=s2>&#34;auth_uri&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;https://accounts.google.com/o/oauth2/auth&#34;</span><span class=p>,</span><span class=w>
</span><span class=w>      </span><span class=s2>&#34;token_uri&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;https://oauth2.googleapis.com/token&#34;</span><span class=p>,</span><span class=w>
</span><span class=w>      </span><span class=s2>&#34;auth_provider_x509_cert_url&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;https://www.googleapis.com/oauth2/v1/certs&#34;</span><span class=p>,</span><span class=w>
</span><span class=w>      </span><span class=s2>&#34;client_x509_cert_url&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;https://www.googleapis.com/robot/v1/metadata/x509/thanos%40gitpods.iam.gserviceaccount.com&#34;</span><span class=w>
</span><span class=w>    </span>}</code></pre></div><h3 id=gcs-policies>GCS Policies</h3><p>For deployment:</p><p><code>Storage Object Creator</code> and <code>Storage Object Viewer</code></p><p>For testing:</p><p><code>Storage Object Admin</code> for ability to create and delete temporary buckets.</p><h2 id=azure-configuration>Azure Configuration</h2><p>To use Azure Storage as Thanos object store, you need to precreate storage account from Azure portal or using Azure CLI. Follow the instructions from Azure Storage Documentation: <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-quickstart-create-account?tabs=portal">https://docs.microsoft.com/en-us/azure/storage/common/storage-quickstart-create-account</a></p><p>To configure Azure Storage account as an object store you need to provide a path to Azure storage config file in flag <code>--objstore.config-file</code>.</p><p>Config file format is the following:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml>type<span class=p>:</span><span class=w> </span>AZURE<span class=w>
</span><span class=w></span>config<span class=p>:</span><span class=w>
</span><span class=w>  </span>storage_account<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span><span class=w>  </span>storage_account_key<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span><span class=w>  </span>container<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span></code></pre></div><h3 id=openstack-swift-configuration>OpenStack Swift Configuration</h3><p>Thanos uses <a href=http://gophercloud.io/>gophercloud</a> client to upload Prometheus data into <a href=https://docs.openstack.org/swift/latest/>OpenStack Swift</a>.</p><p>Below is an example configuration file for thanos to use OpenStack swift container as an object store.</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml>type<span class=p>:</span><span class=w> </span>SWIFT<span class=w>
</span><span class=w></span>config<span class=p>:</span><span class=w>
</span><span class=w>  </span>auth_url<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span><span class=w>  </span>username<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span><span class=w>  </span>user_id<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span><span class=w>  </span>password<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span><span class=w>  </span>domain_id<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span><span class=w>  </span>domain_name<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span><span class=w>  </span>tenant_id<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span><span class=w>  </span>tenant_name<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span><span class=w>  </span>region_name<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span><span class=w>  </span>container_name<span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span></code></pre></div><h2 id=other-minio-supported-s3-object-storages>Other minio supported S3 object storages</h2><p>Minio client used for AWS S3 can be potentially configured against other S3-compatible object storages.</p><h2 id=tencent-cos-configuration>Tencent COS Configuration</h2><p>To use Tencent COS as storage store, you should apply a Tencent Account to create an object storage bucket at first. Note that detailed from Tencent Cloud Documents: <a href=https://cloud.tencent.com/document/product/436>https://cloud.tencent.com/document/product/436</a></p><p>To configure Tencent Account to use COS as storage store you need to set these parameters in yaml format stored in a file:</p><div class=highlight><pre class=chroma><code class=language-$ data-lang=$>type: COS
config:
  bucket: &#34;&#34;
  region: &#34;&#34;
  app_id: &#34;&#34;
  secret_key: &#34;&#34;
  secret_id: &#34;&#34;</code></pre></div><p>Set the flags <code>--objstore.config-file</code> to reference to the configuration file.</p></div></div></div><footer class="bg-dark text-light"><div class="container text-center text-md-left"><div class="row py-5"><div class="col-12 col-md-6 col-lg mb-3 mb-lg-0"><img src=https://improbable-eng.github.io/thanos/icon-dark.png alt=Thanos width=45%></div><div class="col-12 col-md-6 col-lg"><h6 class=font-weight-bold>Documentation</h6><ul class=list-unstyled><li><a class=text-reset href=https://improbable-eng.github.io/thanos/getting-started.md>Getting Started</a></li><li><a class=text-reset href=https://improbable-eng.github.io/thanos/design.md>Design</a></li><li><a class=text-reset href=https://improbable-eng.github.io/thanos/storage.md>Storage</a></li><li><a class=text-reset href=https://improbable-eng.github.io/thanos/service-discovery.md>Service Discovery</a></li></ul></div><div class="col-12 col-md-6 col-lg"><h6 class=font-weight-bold>Community</h6><ul class=list-unstyled><li><a href=https://join.slack.com/t/improbable-eng/shared_invite/enQtMzQ1ODcyMzQ5MjM4LWY5ZWZmNGM2ODc5MmViNmQ3ZTA3ZTY3NzQwOTBlMTkzZmIxZTIxODk0OWU3YjZhNWVlNDU3MDlkZGViZjhkMjc class=text-reset><i class="fab fa-fw fa-slack"></i>Slack</a></li><li><a href=https://github.com/improbable-eng/thanos class=text-reset><i class="fab fa-fw fa-github"></i>GitHub</a></li><li><a href=https://twitter.com/ThanosMetrics class=text-reset><i class="fab fa-fw fa-twitter"></i>Twitter</a></li></ul></div><div class="col col-md-6 col-lg"><h6 class=font-weight-bold>About</h6><p>Thanos is an OSS licensed project as Apache License 2.0</p></div></div></div></footer><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js integrity=sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js integrity=sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k crossorigin=anonymous></script></body></html>